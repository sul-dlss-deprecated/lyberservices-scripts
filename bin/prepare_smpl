#! /usr/bin/env ruby
NO_ENVIRONMENT=true
require File.expand_path(File.dirname(__FILE__) + '/../config/boot')

def help(error_msg)
  abort "#{error_msg}\n\nUsage:\n    prepare_smpl BUNDLE_DIR [CSV_FILENAME]\n"
end

# Load YAML config file for the bundle of materials to be pre-assembled.
help "Incorrect N of arguments." if ARGV.size == 0

bundle_dir = ARGV[0]

params={}
params[:bundle_dir]=bundle_dir
params[:csv_filename]=ARGV[1] if ARGV.size > 1
params[:verbose]=true

cm=PreAssembly::Smpl.new(params)
cm.prepare_smpl_content